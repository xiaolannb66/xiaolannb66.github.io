一、引言
1.多态的概念：
  所谓多态，就是不同对象调用同一接口，对外呈现出不同的形态
2.多态的重要性：
    C++作为面向对象语言的先驱，设计出多态这种高级语法十分有价值，对于开发者来说，最重要的作用就是提升开发效率，提高了代码的可读性，
    同时也在很大程度上提升了代码的维护性
3.本文将讲解多态相比传统面向过程语言有哪些优点，以及多态在实际场景的应用

二、为什么需要多态
1.传统if,else/switch"横行"的坏味道：
  试想，一个程序中如果想根据用户输入的不同操作来进行不同的操作，比如下面这个经典的支付例子
  enum class PayType {
    WeChat,
    AliPay,
    CreditCard
};

void processPayment(PayType type) {
    if (type == PayType::WeChat) {
        // 微信支付逻辑
        std::cout << "Paying via WeChat..." << std::endl;
        // ...
    }
    else if (type == PayType::AliPay) {
        // 支付宝支付逻辑
        std::cout << "Paying via AliPay..." << std::endl;
        // ...
    }
    else if (type == PayType::CreditCard) {
        // 信用卡支付逻辑
        std::cout << "Paying via CreditCard..." << std::endl;
        // ...
    }
}
  看吧，如果用if,else，乍一看感觉还挺工整的，实际上暗藏许多“风险”
1.扩展性差，你如果想要新增一门业务逻辑，便必须对原逻辑进行修改，比如我新增一种
else if (type == PayType::ApplePay) {
    ...
}
到后面就变得越来越长了，单看这一层层的else if就让人读起来难受死了

2.可维护性差，排查错误很麻烦，许许多多逻辑杂在一个成员函数里，
不说美观了，不用内存调试基本上非常难找出错误，但实际开发中由于代码量巨大，
用内存监视的方法调试的情况很少，更多的是根据打印调试和靠自己经验

3.耦合度高，这一点在实际开发中是十分致命且难以处理的问题，如果许多代码逻辑之间彼此出现了
互相依赖，并且出现bug，不说找到错误吧，就算定位到了，解决起来也是十分麻烦的，需要对逻辑进行重构

然而多态在很大程度上淡化了这些问题，下面让我们用一组场景来说明是如何它做到的

三、动态多态的典型使用场景
  就拿平时游戏引擎经常用到的图形系统来说吧，图形UI都会用到圆形，矩形，三角形等等，用多态呈现的接口是
这样的：
//基类，定义各个派生类的共性特点
class Shape {
public:
    virtual ~Shape() = default;
    virtual void draw() const = 0; // 动态多态的核心
};
也许你注意到了，我将draw接口设置成了纯虚函数，其目的就是为了强制让子类对其重写，以达到不同形态，
下面让我们看看子类的实现
class Circle : public Shape {
public:
    void draw() const override {
        std::cout << "Drawing a Circle\n";
    }
};

class Rectangle : public Shape {
public:
    void draw() const override {
        std::cout << "Drawing a Rectangle\n";
    }
};

class Triangle : public Shape {
public:
    void draw() const override {
        std::cout << "Drawing a Triangle\n";
    }
};

void render(const Shape& s) {
    s.draw();  // 动态绑定，根据对象实际类型调用不同实现
}
  我们在这里对父类的draw函数进行重写，相信看到这里你就会发现多态是如何解决诸如上文if,else这些问题的，
1.扩展性明显比传统的分支结构强，我仅需新建类然后继承Shape类进行新增，无需动原先的任何代码
2.可读性和维护性大大提高，你是想像上文中漫天else if中找bug，还是愿意直接直接在某个工整的图形逻辑中找bug
  ，我相信大部分人会选择后者
3.它相对于传统的逻辑实现了解耦，派生类只依赖基类，而不会干扰到其他派生类，这样在以后如果要修改业务逻辑  
  时毋庸置疑会方便的不止一点半点

四、使用多态的安全性
  多态的优势远远不止在业务的实现上，更体现在它对于内存的申请与释放的安全上
  试想，你创建了n个对象，当用户退出应用时，你必须得一个一个释放对象资源，第一是效率慢，第二是很容易漏掉对象！！！
这样就会导致内存泄漏，C++本是运行效率最高的编程语言，如果你一直忘记释放资源，说句扎心的，或许还不如用Java甚至Python
去开发
  然而使用多态却可以很简单的处理这类问题，仅需delete掉基类指针即可，别忘了，将析构函数声明为virtual也可以支持动态绑定，
会自动调用析构，释放所有派生类资源

五、多态的注意点与成本
  相信看到这里，你会觉得多态是面向对象语言十分伟大的设计，但当你高兴的同时，我必须告诉你一些多态的"瑕疵"
1.虚函数开销
  当你对父类的一些成员函数进行virtual修饰时，并且你子类重写这些函数构成多态时，你子类的对象就会悄悄在内存中加入一个虚函数指针，
它会指向一张虚函数表，里面全是你类里的虚函数地址，然后通过虚函数地址去调用对应的虚函数，在32位机器中，它占4字节，在64位机器
中它会占8字节，虽然占用内存不大，但我想说明的一点是，不要无脑给你的所有函数设为virtual，请配合业务场景使用，不然还可能对自己造
成一定的困惑
